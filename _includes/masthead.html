{% assign display_name = user.name | default: site.author.name | default: 'Bryce Westheimer' %}
{% assign display_title = site.author.title | default: user.company %}
{% assign display_bio = site.author.bio | default: user.bio %}

<div class="profile">
  <img src="{% if user.avatar_url %}{{ user.avatar_url }}{% elsif site.author.avatar %}{{ site.author.avatar | relative_url }}{% else %}{{ '/assets/favicon.svg' | relative_url }}{% endif %}"
    class="profile__avatar"
    alt="{{ display_name }} headshot">
  
  <h1 class="profile__name">{{ display_name }}</h1>

  {% if display_title %}
    <p class="profile__title">{{ display_title }}</p>
  {% endif %}

  {% if display_bio %}
    <div class="profile__bio">
      {{ display_bio | markdownify }}
    </div>
  {% endif %}

  {% if include.metadata %}
    <div class="profile__meta">
      {% if display_title %}
        <div class="profile__meta-item">
          {% octicon briefcase height:16 class:"" fill:currentColor aria-label:Role %}
          {{ display_title }}
        </div>
      {% endif %}
      
      <div class="profile__meta-item">
        {% octicon mark-github height:16 class:"" fill:currentColor aria-label:GitHub %}
        <a href="https://github.com/{% if user.login %}{{ user.login }}{% else %}{{ site.author.github }}{% endif %}">
          @{% if user.login %}{{ user.login }}{% else %}{{ site.author.github }}{% endif %}
        </a>
      </div>
      
      {% if user.email or site.author.email %}
        <div class="profile__meta-item">
          {% octicon mail height:16 class:"" fill:currentColor aria-label:Email %}
          <a href="mailto:{% if user.email %}{{ user.email }}{% else %}{{ site.author.email }}{% endif %}">
            {% if user.email %}{{ user.email }}{% else %}{{ site.author.email }}{% endif %}
          </a>
        </div>
      {% endif %}
      
      {% if user.location or site.author.location %}
        <div class="profile__meta-item">
          {% octicon location height:16 class:"" fill:currentColor aria-label:Location %}
          {% if user.location %}{{ user.location }}{% else %}{{ site.author.location }}{% endif %}
        </div>
      {% endif %}
      
      {% if site.author.google_scholar %}
        <div class="profile__meta-item">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M5.242 13.769L0 9.5 12 0l12 9.5-5.242 4.269C17.548 11.249 14.978 9.5 12 9.5c-2.977 0-5.548 1.748-6.758 4.269zM12 10a7 7 0 1 0 0 14 7 7 0 0 0 0-14z"/>
          </svg>
          <a href="https://scholar.google.com/citations?user={{ site.author.google_scholar }}">
            Google Scholar
          </a>
        </div>
      {% endif %}
    </div>

    {% if site.social_media %}
      <div class="social-links">
        {% for account in site.social_media %}
          {% assign service_shortname = account[0] %}
          {% assign service = site.data.social_media[service_shortname] %}
          {% if service %}
            <a href="{{ service.profile_url_prefix }}{{ account[1] }}" 
               class="social-links__link" 
               aria-label="{{ service.name }}: {{ account[1] }}"
               title="{{ service.name }}">
              {{ service.icon_svg }}
            </a>
          {% endif %}
        {% endfor %}
      </div>
    {% endif %}
    
    {% if user.hireable %}
      <div style="margin-top: var(--spacing-lg);">
        <span class="tech-tag tech-tag--primary">Available for Industry Positions</span>
      </div>
    {% endif %}
  {% endif %}
</div>
